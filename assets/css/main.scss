---
# Only the main Sass file needs front matter (the dashes are enough)
---

/* =====================
   Theme variables (yours)
   ===================== */

/* Default theme colors */
$theme-colors: (
  "coolblack": #090a0b,
  "spacegrey": #353535,
  "snowwhite": #ffffff,
);

/* Default brand colors */
$brand-colors: (
  "orangered": #ff5100,
  "greatgold": #f2cb05,
  "greenblue": #389092,
);

$theme-name: "{{ site.theme_color }}";
$brand-name: "{{ site.brand_color }}";
$theme-color: map-get($theme-colors, "snowwhite");
$brand-color: map-get($brand-colors, "greenblue");

@if map-has-key($theme-colors, $theme-name) {
  $theme-color: map-get($theme-colors, $theme-name);
} @else if str-index($theme-name, "#") == 1 {
  $theme-color: {{ site.theme_color | default: '#ffffff' }};
}

@if map-has-key($brand-colors, $brand-name) {
  $brand-color: map-get($brand-colors, $brand-name);
} @else if str-index($brand-name, "#") == 1 {
  $brand-color: {{ site.brand_color | default: '#69b7aa' }};
}

$content-width: {{ site.content_width | default: '920px' }};

/* Load base Yat styles */
@import "yat";

/* =====================
   Site overrides (ours)
   ===================== */

/* ---- Controls ---- */
:root { --header-banner-height: 45vh; }

/* 1) Header banner: OFF by default, ON only for the homepage
   ----------------------------------------------------------- */
.site-header + main::before {             /* default = off (all pages) */
  display: none !important;
  content: "";
}

.home .site-header + main::before {       /* home only */
  display: block !important;
  content: "";
  height: var(--header-banner-height);
  background: #000
    url('{{ "/assets/images/banners/brain_banner.png" | relative_url }}')
    center / cover no-repeat;
  transform: translateZ(0);               /* prevent repaint jitter */
  will-change: transform;
}

/* 2) Hide TOC / category sidebar on the HOME page
   ----------------------------------------------- */
.home #toc,
.home .toc,
.home .post-toc,
.home .toc-wrap,
.home .toc-container,
.home .toc-aside,
.home .home-sidebar,
.home .home-categories {
  display: none !important;
}

/* 3) Hide TOC on the CV page
   -------------------------- */

/* A) Common layout/body classes in Yat/minima forks */
.layout-cv #toc, .layout-cv .toc, .layout-cv .post-toc, .layout-cv .toc-wrap,
.layout-cv .toc-container, .layout-cv .toc-aside,
.page-cv   #toc, .page-cv   .toc, .page-cv   .post-toc, .page-cv   .toc-wrap,
.page-cv   .toc-container, .page-cv   .toc-aside {
  display: none !important;
}

/* B) Fallback: any body class containing "cv" */
body[class*="cv"] #toc, body[class*="cv"] .toc, body[class*="cv"] .post-toc,
body[class*="cv"] .toc-wrap, body[class*="cv"] .toc-container, body[class*="cv"] .toc-aside {
  display: none !important;
}

/* C) Last-resort fallback: give your CV page a first-level title with id="cv-title"
      (i.e., in cv.md:  `# CV {#cv-title}` ) */
body:has(main h1#cv-title) #toc,
body:has(main h1#cv-title) .toc,
body:has(main h1#cv-title) .post-toc,
body:has(main h1#cv-title) .toc-wrap,
body:has(main h1#cv-title) .toc-container,
body:has(main h1#cv-title) .toc-aside {
  display: none !important;
}

/* 4) (Optional) Gentle hover drift for the home banner (no flicker)
   ----------------------------------------------------------------- */
/*
@media (prefers-reduced-motion: no-preference) {
  .home .site-header + main:hover::before {
    transition: transform 6s ease;
    transform: translate3d(0, -1%, 0);
  }
}
*/
